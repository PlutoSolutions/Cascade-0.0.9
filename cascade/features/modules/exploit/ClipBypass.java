/*
 * Decompiled with CFR 0.150.
 * 
 * Could not load the following classes:
 *  net.minecraft.network.Packet
 *  net.minecraft.network.play.client.CPacketPlayer$Position
 */
package cascade.features.modules.exploit;

import cascade.Mod;
import cascade.features.modules.Module;
import cascade.features.setting.Setting;
import cascade.util.EntityUtil;
import net.minecraft.network.Packet;
import net.minecraft.network.play.client.CPacketPlayer;

public class ClipBypass
extends Module {
    public Setting<Mode> mode = this.register(new Setting<Mode>("Mode", Mode.Void));
    public Setting<Integer> height = this.register(new Setting<Object>("MaxHeight", Integer.valueOf(9), Integer.valueOf(1), Integer.valueOf(256), v -> this.mode.getValue() == Mode.Void));

    public ClipBypass() {
        super("ClipBypass", Module.Category.EXPLOIT, "Clip bypasses");
    }

    @Override
    public void onEnable() {
        if (ClipBypass.fullNullCheck()) {
            this.disable();
            return;
        }
        if (this.mode.getValue() == Mode.Void) {
            if (ClipBypass.mc.player.posY > (double)this.height.getValue().intValue()) {
                this.disable();
                return;
            }
            EntityUtil.packetJump(true);
            mc.getConnection().sendPacket((Packet)new CPacketPlayer.Position(ClipBypass.mc.player.posX, -1.4, ClipBypass.mc.player.posZ, false));
        } else {
            Mod.movement.setMotion(0.0, 0.0, 0.0);
            EntityUtil.startSneaking();
            EntityUtil.packetJump(true);
            mc.getConnection().sendPacket((Packet)new CPacketPlayer.Position(ClipBypass.mc.player.posX, ClipBypass.mc.player.posY, ClipBypass.mc.player.posZ, false));
            ClipBypass.mc.player.setLocationAndAngles(ClipBypass.mc.player.posX, ClipBypass.mc.player.posY, ClipBypass.mc.player.posZ, ClipBypass.mc.player.rotationYaw, ClipBypass.mc.player.rotationPitch);
            mc.getConnection().sendPacket((Packet)new CPacketPlayer.Position(ClipBypass.mc.player.posX, ClipBypass.mc.player.posY - 1339.2, ClipBypass.mc.player.posZ, true));
            EntityUtil.stopSneaking(false);
        }
        this.disable();
    }

    public static enum Mode {
        Void,
        AntiTrap;

    }
}

